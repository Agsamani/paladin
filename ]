using UnityEngine;
using UnityEngine.InputSystem;

public class ArmContoller : MonoBehaviour
{
    private InputSystem_Actions _input;
    private Animator animator;

    private string _currentAnimationState;

    private void Awake()
    {
        _input = new InputSystem_Actions();
        animator = GetComponent<Animator>();
    }

    void Start()
    {
    }

    void Update()
    {
        ChangeAnimationState("ArmsIdle");
    }

    private void OnAttack(InputAction.CallbackContext ctx)
    {
        ChangeAnimationState("ArmsAttack1");
    }

    private void ChangeAnimationState(string newState)
    {
        if (_currentAnimationState == newState) return;

        _currentAnimationState = newState;
        animator.CrossFadeInFixedTime(_currentAnimationState, 0.2f);
    }

    private void OnEnable()
    {
        _input.Enable();
        _input.Player.Attack.performed += OnAttack;
    }

    private void OnDisable()
    {
        _input.Disable();
        _input.Player.Attack.performed -= OnAttack;
    }
}
